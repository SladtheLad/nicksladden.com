---
const { altText, name, link, title, subtitle, animalIcon } = Astro.props;
import type { AstroBuiltinProps } from 'astro';
import AnimalSprites from './Animals/animal-sprites.astro';

interface Props extends AstroBuiltinProps {
  animalIcon: string;
  altText?: string;
  name?: string;
  link: string | undefined;
  subtitle: string | undefined;
  title: string;
}
---

<a href={link}>
  <div class='oreilly-blog-card'>
    <span class='top-bar'></span>
    <!-- <span class='side-sticker'></span> -->
    <div class='title-container'><span class='title'>{title}</span></div>
    <AnimalSprites icon={animalIcon} />
    <span class='subtitle'>{subtitle}</span>
  </div>

  <style scoped>
    a {
      text-decoration: none;
      outline: none;
      height: 100%;
      width: 100%;
      position: relative;
      z-index: 4;
    }

    .oreilly-blog-card {
      text-decoration: none;
      color: var(--header-color);

      transition: all 0.2s;
      border-radius: var(--border-radius);
      background-color: var(--background-color);
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      display: flex;
      flex-direction: column;
      height: 30dvh;
      width: 20dvw;
      padding: 1rem;

      span.top-bar {
        background-color: var(--accent);
        opacity: 0.6;
        position: relative;
        display: block;
        height: 4px;
        width: 100%;
        top: -18px;
      }

      div.title-container {
        background-color: var(--accent);
        opacity: 0.6;
        color: var(--background-color);
        padding-inline: 1rem;
        padding-block: 0.5rem;

        min-height: 8dvh;
        display: flex;
        flex-basis: content;
        align-items: center;
        margin-top: 2rem;
      }

      span.title {
        font-size: 2rem;
        font-weight: 700;
        /* line-height: 1.2; */
        max-width: 70%;
      }
      span.subtitle {
        font-size: 0.8rem;
        /* line-height: 1.5; */
        margin-block: 2rem;
      }
      span.side-sticker {
        background-color: var(--header-color);
        top: 0;
        position: relative;
        display: block;
        height: 2rem;
        width: 40%;
        right: -75%;
        overflow: hidden;
        transform: rotate(45deg);
        z-index: -1;
      }

      @media screen and (max-width: 768px) {
        width: 100%;
        height: 40dvh;
        /* div.title-container {
          margin-top: 0;
        }
        span.top-bar {
          top: -1rem;
        } */
        span.subtitle {
          font-size: 1rem;
        }
      }
    }
    svg {
      position: absolute;
      right: 0;
      top: 0;
      transform: scale(1) translate(0%, 0%);
      transition: all ease-in-out 0.2s;
      fill: var(--background-color);
      font-size: var(--icon-size-1);
      .icon-outline {
        color: var(--icon-outline);
      }
      .icon-primary {
        color: var(--icon-primary);
      }
      .icon-secondary {
        color: var(--icon-secondary);
      }
      .icon-fill-primary {
        color: var(--icon-fill-primary);
      }
      .icon-tertiary {
        color: var(--icon-tertiary);
      }
      .icon-quaternary {
        color: var(--icon-quaternary);
      }
      .icon-quinary {
        color: var(--icon-quinary);
      }
    }
    a:focus,
    a:active,
    a:focus-visible,
    a:hover {
      .oreilly-blog-card {
        outline: solid 1px var(--accent);
        /* border-color: color-mix(in hsl, var(--accent), transparent 80%); */
        div.title-container {
          opacity: 1;
        }
        span.top-bar {
          opacity: 1;
        }
      }
      svg {
        transform: scale(1.1) translate(8%, 7%);
      }
    }
  </style>
</a>
